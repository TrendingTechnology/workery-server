{% load staticfiles i18n %}
<!-- FORM JAVASCRIPT -->
<!----------------------------------------------------------------------------->
<script>
    /**
     *  When page loads, the following code will be run first.
     */
    $(document).ready(function () {
        // Initialize our datepicker jQuery code with our HTML view.
        $( "#dob" ).datepicker({
            dateFormat: 'yy-mm-dd'  // https://stackoverflow.com/a/7500097
        });

        // Populate our 'select2' chosen values.
        var tmp_person_tags = localStorage.getObj("tmp_commercial_customer_person_tag_ids");
        $('#person_tags').val(tmp_person_tags);

        var tmp_company_tags = localStorage.getObj("tmp_commercial_customer_company_tag_ids");
        $('#company_tags').val(tmp_company_tags);

        // Initialize our 'select2' element.
        $('#person_tags').select2();
        $('#company_tags').select2();

        // Assign previously set values.
        $('#companyname').val(localStorage.getItem("tmp_commercial_customer_company_name"));
        $('#companytype').val(localStorage.getItem("tmp_commercial_customer_company_type"));
        $('#customer_affiliation').val(localStorage.getItem("tmp_commercial_customer_affiliation"));
        $('#firstname').val(localStorage.getItem("tmp_commercial_customer_given_name"));
        $('#middlename').val(localStorage.getItem("tmp_commercial_customer_middle_name"));
        $('#lastname').val(localStorage.getItem("tmp_commercial_customer_last_name"));
        $('#phonenumber').val(localStorage.getItem("tmp_commercial_customer_telephone"));
        $('#phonetype').val(localStorage.getItem("tmp_commercial_customer_telephone_type_of"));
        $('#other_phonenumber').val(localStorage.getItem("tmp_commercial_customer_other_telephone"));
        $('#other_phonenumber_type').val(localStorage.getItem("tmp_commercial_customer_other_telephone_type_of"));
        $('#dob').val(localStorage.getItem("tmp_commercial_customer_date_of_birth"));
        $('#gender').val(localStorage.getItem("tmp_commercial_customer_gender"));
        $("input[name=ok_to_email][value=" + localStorage.getItem("tmp_commercial_customer_ok_to_email") + "]").prop('checked', true);
        $("input[name=ok_to_text][value=" + localStorage.getItem("tmp_commercial_customer_ok_to_text") + "]").prop('checked', true);
        $('#street_address').val(localStorage.getItem("tmp_commercial_customer_street_address"));
        $('#street_address_extra').val(localStorage.getItem("tmp_commercial_customer_street_address_extra"));
        $('#neighbourhood').val(localStorage.getItem("tmp_commercial_customer_neighbourhood"));
        $('#address_locality').val(localStorage.getItem("tmp_commercial_customer_address_locality"));
        $('#address_region').val(localStorage.getItem("tmp_commercial_customer_address_region"));
        $('#address_country').val(localStorage.getItem("tmp_commercial_customer_address_country"));
        $('#postal_code').val(localStorage.getItem("tmp_commercial_customer_postal_code"));
        $('#post_office_box_number').val(localStorage.getItem("tmp_commercial_customer_post_office_box_number"));
        $('#email').val(localStorage.getItem("tmp_commercial_customer_email"));
        $('#telephone').val(localStorage.getItem("tmp_commercial_customer_telephone"));
        $('#password').val(localStorage.getItem("tmp_commercial_customer_password"));
        $('#password_repeat').val(localStorage.getItem("tmp_commercial_customer_password_repeat"));

    }); // end Ready

    /**
     *  Function will unlock the submit button.
     */
    function disable_btn() {
        $('#id_submit_btn').val("{% trans 'Please Wait...' %}");
        $('#id_submit_btn').prop("disabled", true);
    }

    /**
     *  Function will lock the submit button.
     */
    function enable_btn() {
        $('#id_submit_btn').prop("disabled", false);
        $('#id_submit_btn').val("{% trans 'Update' %}");
    }

    function get_selected_radio_value(radiofields_name) {
        var radios = document.getElementsByName(radiofields_name);
        for (var i = 0, length = radios.length; i < length; i++) {
            if (radios[i].checked) {
                // only one radio can be logically checked, don't check the rest
                return radios[i].value;
            }
        }
        return null;
    }

    function valid_textfield_value(textfield_id, is_required, min_length) {
        var textfield = document.getElementById(textfield_id);
        var textfield_error = document.getElementById(textfield_id+'-error');
        var value = textfield.value;

        // CASE 1: BLANK FIELD.
        if (is_required) {
            if (value == '' || value == null || value == undefined || value.length == 0) {
                $('#'+textfield_id).addClass('border-primary').removeClass('border-success');
                textfield_error.innerHTML = "Field should not be blank.";
                return true; // This means that an error occured in validation.
            }
        }

        // CASE 2: MINIMUM LENGTH NOT MET.
        if (value.length > 0) {              // If user entered something...
            if (value.length < min_length) { // Validate that the minium was entered...
                $('#'+textfield_id).addClass('border-primary').removeClass('border-success');
                textfield_error.innerHTML = "Field requires a minimum of "+min_length+" characters.";
                return true;
            }
        }

        // Update the GUI to indicate this field has been updated.
        $('#'+textfield_id).addClass('border-success').removeClass('border-primary');

        // Return "false" which means no errors occured.
        return false;
    }

    function valid_radiofields_seleciton(radiofields_name, is_required) {
        var value = get_selected_radio_value(radiofields_name);

        if (is_required) {
            if (value == null) {
                //TODO: IMPLEMENT UPDATE GUI VALIDATION.
                // alert("Please select a radio button for "+radiofields_name+".");
                return false;
            }
        }

        // Return "false" which means no errors occured.
        return false;
    }

    function ajax_cancel(redirect_url) {
        window.location = redirect_url;
    }

    /**
     *  Function will confirm the email is unique with the API web-service
     *  and then submit our form for saving in the local storage after the
     *  fields get validated.
     */
    function ajax_post_form_submission(redirect_url) {
        var tmp_email = $('#email').val();
        post_is_email_unique_api(
            tmp_email,
            function(result) {
                if (result === 1 || result === '1') {
                    save_submission(redirect_url);
                } else {
                    alert("EMAIL ALREADY EXISTS, PLEASE PICK A NEW EMAIL ADDRESS"); //TODO: UPDATE THE GUI.
                    return;
                }
            },
            function(json_error) {
                alert(json_error);
                //TODO: (1) OUTPUT THE ERROR IN A TEXT. (2) FOCUS ON THE OUTPUT.
            }
        ); // end API CALL
    }

    /**
     *  Function will validate the fields and then save them to the local
     *  storage, then direct user to the link in the 'redirect_url' variable.
     */
    function save_submission(redirect_url) {
        // GET OUR FORM.
        var form = document.getElementById('add-client-form');

        // VALIDATE ALL OUR FORM FIELDS.
        var has_error = false;
        has_error |= valid_textfield_value('companyname', true, 2);
        has_error |= valid_textfield_value('companytype', true, 1);
        has_error |= valid_textfield_value('customer_affiliation', true, 1);
        has_error |= valid_textfield_value('firstname', true, 2);
        has_error |= valid_textfield_value('lastname', true, 2);
        has_error |= valid_textfield_value('phonenumber', true, 10);
        has_error |= valid_textfield_value('phonetype', true, 1);
        has_error |= valid_textfield_value('other_phonenumber', false, 10);
        has_error |= valid_textfield_value('other_phonenumber_type', false, 1);
        has_error |= valid_radiofields_seleciton('ok_to_email', true);
        has_error |= valid_radiofields_seleciton('ok_to_text', true);
        has_error |= valid_textfield_value('street_address', true, 3);
        has_error |= valid_textfield_value('street_address_extra', false, 3)
        has_error |= valid_textfield_value('neighbourhood', false, 2)
        has_error |= valid_textfield_value('address_locality', true, 3);
        has_error |= valid_textfield_value('address_region', true, 3);
        has_error |= valid_textfield_value('address_country', true, 3);
        has_error |= valid_textfield_value('postal_code', true, 3);
        has_error |= valid_textfield_value('post_office_box_number', false, 3);
        has_error |= valid_textfield_value('password', false, 2);
        has_error |= valid_textfield_value('password_repeat', false, 2);

        // INTERRUPT THE FORM SUBMISSION IF ANY ERRORS EXISTED AND UPDATE THE
        // GUI TO INDICATE THAT WE HAVE VALIDATED SOME FIELDS.
        form.classList.add('was-validated');
        if (has_error) {
            return; // STOP THIS FUNCTION FROM GOING FORWARD UNTIL ERRORS FIXED.
        }

        // EXTRACT OUR FIELD VALUES AND SAVE THEM IN LOCAL STORAGE.
        var company_name = $('#companyname').val();
        var company_type = $('#companytype').val();
        var company_type_value = $('#companytype_id_'+company_type).text();
        var given_name = $('#firstname').val();
        var middle_name = $('#middlename').val();
        var last_name = $('#lastname').val();
        var date_of_birth = $('#dob').val();
        if (date_of_birth !== undefined && date_of_birth != null && date_of_birth.length > 0) {
            var mydate = new Date(date_of_birth); // Convert "MM DD, YYYY" to JS DATE
            date_of_birth = mydate.toISOString().substring(0, 10); // Convert JS DATE to "YYYY-MM-DD"
        } else {
            date_of_birth = null;
        }
        var gender = $('#gender').val();
        if (gender == undefined || gender == null || gender.length == 0) {
            gender = null;
        }
        var ok_to_email = get_selected_radio_value('ok_to_email');
        var ok_to_text = get_selected_radio_value('ok_to_text');
        var street_address = $('#street_address').val();
        var street_address_extra = $('#street_address_extra').val();
        var neighbourhood = $('#neighbourhood').val();
        var address_region = $('#address_region').val();
        var address_locality = $('#address_locality').val();
        var address_country = $('#address_country').val();
        var postal_code = $('#postal_code').val();
        var post_office_box_number = $('#post_office_box_number').val();
        var email = $('#email').val();
        // var area_served = $('#id_area_served').val();
        var telephone = $('#phonenumber').val();
        var telephone_type_of = $('#phonetype').val();
        // var telephone_extension = $('#id_telephone_extension').val();
        var other_telephone = $('#other_phonenumber').val();
        var other_telephone_type_of = $('#other_phonenumber_type').val();
        // var fax_number = $('#id_fax_number').val();
        var password = $('#password').val();
        var password_repeat = $('#password_repeat').val();
        var customer_affiliation = $('#customer_affiliation').val();
        var customer_affiliation_value = $('#customer_affiliation_id_'+customer_affiliation).text();
        var person_tags = $('#person_tags').val();
        var company_tags = $('#company_tags').val();

        localStorage.setItem("tmp_commercial_customer_company_name", company_name);
        localStorage.setItem("tmp_commercial_customer_company_type", company_type);
        localStorage.setItem("tmp_commercial_customer_company_type_value", company_type_value);
        localStorage.setItem("tmp_commercial_customer_affiliation", customer_affiliation);
        localStorage.setItem("tmp_commercial_customer_affiliation_value", customer_affiliation_value);
        localStorage.setItem("tmp_commercial_customer_given_name", given_name);
        localStorage.setItem("tmp_commercial_customer_middle_name", middle_name);
        localStorage.setItem("tmp_commercial_customer_last_name", last_name);
        localStorage.setItem("tmp_commercial_customer_date_of_birth", date_of_birth);
        localStorage.setItem("tmp_commercial_customer_gender", gender);
        localStorage.setItem("tmp_commercial_customer_ok_to_email", ok_to_email);
        localStorage.setItem("tmp_commercial_customer_ok_to_text", ok_to_text);
        localStorage.setItem("tmp_commercial_customer_street_address", street_address);
        localStorage.setItem("tmp_commercial_customer_street_address_extra", street_address_extra);
        localStorage.setItem("tmp_commercial_customer_neighbourhood", neighbourhood);
        localStorage.setItem("tmp_commercial_customer_address_region", address_region);
        localStorage.setItem("tmp_commercial_customer_address_locality", address_locality);
        localStorage.setItem("tmp_commercial_customer_address_country", address_country);
        localStorage.setItem("tmp_commercial_customer_postal_code", postal_code);
        localStorage.setItem("tmp_commercial_customer_post_office_box_number", post_office_box_number);
        localStorage.setItem("tmp_commercial_customer_email", email);
        localStorage.setItem("tmp_commercial_customer_telephone", telephone);
        localStorage.setItem("tmp_commercial_customer_telephone_type_of", telephone_type_of);
        localStorage.setItem("tmp_commercial_customer_other_telephone", other_telephone);
        localStorage.setItem("tmp_commercial_customer_other_telephone_type_of", other_telephone_type_of);
        localStorage.setItem("tmp_commercial_customer_password", password);
        localStorage.setItem("tmp_commercial_customer_password_repeat", password_repeat);

        // SAVE ARRAY OF IDS.
        localStorage.setObj("tmp_commercial_customer_person_tag_ids", person_tags);
        localStorage.setObj("tmp_commercial_customer_company_tag_ids", company_tags);

        // SAVE ARRAY OF VALUE ITEMS.
        var person_tags_arr = [];
        for (var i = 0; i < person_tags.length; i++) {
            var option_id = person_tags[i];
            var option_value = $('#person_tag_option_id_'+option_id).text();
            person_tags_arr.push(option_value);
        } // end FOR LOOP.
        localStorage.setObj("tmp_commercial_customer_person_tag_values", person_tags_arr);

        var company_tags_arr = [];
        for (var i = 0; i < company_tags.length; i++) {
            var option_id = company_tags[i];
            var option_value = $('#company_tag_option_id_'+option_id).text();
            company_tags_arr.push(option_value);
        } // end FOR LOOP.
        localStorage.setObj("tmp_commercial_customer_company_tag_values", company_tags_arr);

        window.location = redirect_url;
    }
</script>
<!----------------------------------------------------------------------------->
<!-- end FORM JAVASCRIPT -->
<!-- FORM -->
<!------------------------------------------------------------------------->
<div class="col-sm-5 mx-auto mt-2">
    <!-- Residential form -->
    <div class="col-sm-12 fade show active" id="client-form" aria-labelledby="commercial">
        <h3 class="pt-4 pb-2 text-center">Commercial</h3>
        <p>Use this form to fill out the company information.</p>
        <p><span class="text-secondary font-italic"><sup>*</sup>&nbsp;-&nbsp;Indicates required field to fill out.</span></p>
        <!-- Error Output -->
        <div id="all_error_result" name="all_error_result"></div>
        <!-- end Error Output -->
        <p>&nbsp;</p>
        <form id="add-client-form" method="post" class="needs-validation" action="" novalidate>
        <!-- ############ CONTACT DETAILS ############ -->
        <p class="border-bottom mb-3 pb-1 text-secondary">Company Contact</p>
        <p>Please fill in the account details for the company representative.</p>
        <div class="form-row">
            <div class="form-group col-md-12 mb-4">
                <label for="firstname">Contact first name <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="firstname" name="firstname" placeholder="First name" minlength="3" required="" autofocus>
                <div id="firstname-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="middlename">Contact middle name</label>
                <input type="text" class="form-control form-control-lg border border-success" id="middlename" name="middlename" placeholder="Middle name" minlength="3" required="">
                <div id="middlename-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="lastname">Contact last name <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="lastname" name="lastname" placeholder="Last name" minlength="3" required="">
                <div id="lastname-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-8 mb-4">
            <label for="phonenumber">Phone 1 <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="phonenumber" name="phonenumber" placeholder="(xxx) xxx-xxxx" minlength="10" maxlength="14" required="">
                <div id="phonenumber-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-4 mb-4">
                <label for="phonetype">&nbsp;</label>
                <select class="custom-select form-control-lg border-primary" id="phonetype" name="phonetype" required="">
                    <option value="{{ shared_constants.TELEPHONE_CONTACT_POINT_TYPE_OF_ID }}">Landline</option>
                    <option value="{{ shared_constants.MOBILE_CONTACT_POINT_TYPE_OF_ID }}" selected>Mobile</option>
                    <option value="{{ shared_constants.WORK_CONTACT_POINT_TYPE_OF_ID }}">Work</option>
                </select>
                <div id="phonetype-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-8 mb-4">
                <label for="other_phonenumber">Phone 2 (optional)</label>
                <input type="text" class="form-control form-control-lg border border-success" id="other_phonenumber" name="other_phonenumber" placeholder="(xxx) xxx-xxxx" minlength="10" maxlength="14">
                <div id="other_phonenumber-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-4 mb-4">
                <label for="other_phonenumber_type">&nbsp;</label>
                <select class="custom-select form-control-lg border-success" id="other_phonenumber_type" name="other_phonenumber_type">
                    <option value="{{ shared_constants.TELEPHONE_CONTACT_POINT_TYPE_OF_ID }}">Landline</option>
                    <option value="{{ shared_constants.MOBILE_CONTACT_POINT_TYPE_OF_ID }}" selected>Mobile</option>
                    <option value="{{ shared_constants.WORK_CONTACT_POINT_TYPE_OF_ID }}">Work</option>
                </select>
                <div id="other_phonenumber_type-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="email">E-Mail (optional)</label>
                <input type="email" class="form-control form-control-lg border border-success" id="email" name="email" placeholder="Email Address">
                <div id="email-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group mt-2 mb-4">
                <p class="mb-1">Ok to E-Mail?</p>
                <div class="form-radio custom-control custom-radio custom-control-inline">
                    <input type="radio" id="ok_to_email" name="ok_to_email" value="yes" class="custom-control-input form-check-input">
                    <label class="custom-control-label form-check-label" for="ok_to_email">Yes</label>
                </div>
                <div class="form-radio custom-control custom-radio custom-control-inline">
                    <input type="radio" id="ok_to_email2" name="ok_to_email" value="no" class="custom-control-input form-check-input">
                    <label class="custom-control-label form-check-label" for="ok_to_email2">No</label>
                </div>
            </div>
            <div class="form-group mt-2 mb-4">
                <p class="mb-1">Ok to Text?</p>
                <div class="form-radio custom-control custom-radio custom-control-inline">
                    <input type="radio" id="ok_to_text" name="ok_to_text" value="yes" class="custom-control-input form-check-input">
                    <label class="custom-control-label form-check-label" for="ok_to_text">Yes</label>
                </div>
                <div class="form-radio custom-control custom-radio custom-control-inline">
                    <input type="radio" id="ok_to_text2" name="ok_to_text" value="no" class="custom-control-input form-check-input">
                    <label class="custom-control-label form-check-label" for="ok_to_text2">No</label>
                </div>
            </div>
            <div class="form-group p-0 col-md-7 mb-4">
                <label for="dob">Date of Birth</label>
                <div class="input-group input-group-lg">
                    <input type="text" class="form-control form-control-lg border border-success" id="dob" name="dob" placeholder="yyyy-mm-dd" required>
                    <div class="input-group-append">
                        <span class="input-group-text dob-icon bg-success border-success"><i class="far fa-calendar-alt"></i></span>
                    </div>
                    <div id="dob-error" class="invalid-feedback"></div>
                </div>
            </div>
            <div class="form-group col-md-7 mb-4 p-0">
                <label for="gender">Gender</label>
                <select class="custom-select form-control-lg border-success" id="gender" name="gender" required>
                    <option value="" selected>Gender...</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
                <div id="gender-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-7 mb-4 p-0">
                <label for="customer_affiliation">Reletionship with company</label>
                <select class="custom-select form-control-lg border-primary" id="customer_affiliation" name="customer_affiliation" required>
                    <option value="" selected>Relationship...</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_AFFILIATION_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_AFFILIATION_ID }}">Affiliated</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_ALUMNI_OF_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_ALUMNI_OF_ID }}">Alumni of</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_FUNDER_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_FUNDER_ID }}">Funder</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_MEMBER_OF_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_MEMBER_OF_ID }}">Member of</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_SPONSOR_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_SPONSOR_ID }}">Sponsor</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_OWNS_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_OWNS_ID }}">Owns</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_FOUNDER_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_FOUNDER_ID }}">Founder</option>
                    <option value="{{ tenant_constants.AFFILIATION_TYPE_EMPLOYEE_ID }}" id="customer_affiliation_id_{{ tenant_constants.AFFILIATION_TYPE_EMPLOYEE_ID }}">Employee of</option>
                </select>
                <div id="customer_affiliation-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="tag">Tags (Person)</label>
                <select id="person_tags" name="person_tags" class="form-control form-control-lg border border-success" name="states[]" multiple="multiple">
                {% for tag in tags %}
                    <option value="{{ tag.id }}" id="person_tag_option_id_{{ tag.id }}">{{ tag }}</option>
                {% endfor %}
                </select>
                <div id="person_tags-error" class="invalid-feedback"></div>
            </div>
        </div>
        <!-- ############ end CONTACT DETAILS ############ -->
        <!-- ############ COMPANY ADDRESS ############ -->
        <p class="border-bottom mb-3 pb-1 text-secondary">Company Details</p>
        <p>Please fill in the company details associated with the company representative.</p>
        <div class="form-row">
            <div class="form-group col-md-12 mb-4">
                <label for="companyname">Company name <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="companyname" name="companyname" placeholder="Company name" minlength="2" maxlength="30" required>
                <div id="companyname-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-7 mb-4">
                <label for="companytype">Company type <sup>*</sup></label>
                <select class="custom-select form-control-lg border-primary" id="companytype" name="companytype" required="">
                    <option value="" selected="">Type...</option>
                    <option value="{{ tenant_constants.PRIVATE_ORGANIZATION_TYPE_OF_ID }}" id="companytype_id_{{ tenant_constants.PRIVATE_ORGANIZATION_TYPE_OF_ID }}">Private</option>
                    <option value="{{ tenant_constants.NON_PROFIT_ORGANIZATION_TYPE_OF_ID }}" id="companytype_id_{{ tenant_constants.NON_PROFIT_ORGANIZATION_TYPE_OF_ID }}">Non-Profit</option>
                    <option value="{{ tenant_constants.GOVERNMENT_ORGANIZATION_TYPE_OF_ID }}" id="companytype_id_{{ tenant_constants.GOVERNMENT_ORGANIZATION_TYPE_OF_ID }}">Government</option>
                </select>
                <div id="companytype-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="street_address">Street Address <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="street_address" name="street_address" placeholder="Street Address" minlength="3" maxlength="255" required>
                <div id="street_address-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="street_address_extra">Street Address (Extra)</label>
                <input type="text" class="form-control form-control-lg border border-success" id="street_address_extra" name="street_address_extra" placeholder="Street Address (Extra)" minlength="3" maxlength="255">
                <div id="street_address_extra-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="neighbourhood">Neighbourhood (optional)</label>
                <input type="text" class="form-control form-control-lg border border-success" id="neighbourhood" name="neighbourhood" placeholder="Neighbourhood" minlength="3">
                <div id="neighbourhood-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="address_locality">City <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="address_locality" name="address_locality" placeholder="City" minlength="3" maxlength="127" required>
                <div id="address_locality-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-7 mb-4">
                <label for="address_region">Province <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="address_region" name="address_region" placeholder="Province" minlength="3" maxlength="127" required>
                <div id="address_region-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-7 mb-4">
                <label for="address_country">Country <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="address_country" name="address_country" placeholder="Country" minlength="3" maxlength="127" required>
                <div id="address_country-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-7 mb-4">
                <label for="postal_code">Postal Code <sup>*</sup></label>
                <input type="text" class="form-control form-control-lg border border-primary" id="postal_code" name="postal_code" placeholder="Postal Address" minlength="6" maxlength="6" required>
                <div id="postal_code-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-7 mb-4">
                <label for="post_office_box_number">Post Office Box # </label>
                <input type="text" class="form-control form-control-lg border border-success" id="post_office_box_number" name="post_office_box_number" placeholder="Post Office Box #" minlength="3" maxlength="255" required>
                <div id="post_office_box_number-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="tag">Tags (Company)</label>
                <select id="company_tags" name="company_tags" class="form-control form-control-lg border border-success" name="states[]" multiple="multiple">
                {% for tag in tags %}
                    <option value="{{ tag.id }}" id="company_tag_option_id_{{ tag.id }}">{{ tag }}</option>
                {% endfor %}
                </select>
                <div id="company_tags-error" class="invalid-feedback"></div>
            </div>
        </div>
        <!-- ############ end COMPANY ADDRESS ############ -->
        <!-- ############ SECURITY ############ -->
        <p class="border-bottom mb-3 pb-1 text-secondary">Account Security</p>
        <div class="form-row">
            <div class="form-group col-md-12 mb-4">
                <label for="password">Password</label>
                <input id="password"
                     name="password"
              placeholder="{% trans 'Password' %}"
                    class="form-control form-control-lg border border-success"
                     type="password"
           autocapitalize="off"
                minlength="2"
                maxlength="30" required />
                <div id="password-error" class="invalid-feedback"></div>
            </div>
            <div class="form-group col-md-12 mb-4">
                <label for="password_repeat">Repeat Password</label>
                <input id="password_repeat"
                     name="password_repeat"
              placeholder="{% trans 'Repeat Password' %}"
                    class="form-control form-control-lg border border-success"
                     type="password"
           autocapitalize="off"
                minlength="2"
                maxlength="30" required />
                <div id="password_repeat-error" class="invalid-feedback"></div>
            </div>
        </div>
        <!-- ############ end SECURITY ############ -->
        <!-- end SUBMIT BUTTON -->
        <div class="form-group col-md-12 mb-3 p-0 mx-auto text-center">
            <button id="id_submit_btn"
                 class="btn btn-success btn-lg mt-4 float-right pl-4 pr-4"
                  type="button"
               onclick="click_next_button();">
                Next <i class="fas fa-arrow-right"></i></button>
            <button id="id_cancel_btn"
                 class="btn btn-orange btn-lg mt-4 float-left pl-4 pr-4"
                  type="button"
               onclick="click_cancel_button();">
                <i class="fas fa-times"></i>&nbsp;Back
            </button>
        </div>
        <!-- end SUBMIT BUTTON -->
    </div>
</div>
<!------------------------------------------------------------------------->
<!-- end FORM -->
