{% extends 'tenant_foundation/tenant_base.html' %}
{% load staticfiles i18n %}

{% block title %}
{% trans 'Add New Member | Over 55 Inc.' %}
{% endblock title %}

{% block header_content %}
{% endblock header_content %}

{% block content %}

<!-- CUSTOM JAVASCRIPT -->
<!----------------------------------------------------------------------------->
<script>
    /**
     *  DEVELOPERS NOTE:
     *  THE FOLLOWING JAVASCRIPT FUNCTIONS MUST BE DECLARED IF YOU WANT TO CALL
     *  THE "associate_create_form.html" FORM TEMPLATE.
     */
    function click_cancel_button() {
        window.location = "{% url 'o55_tenant_member_summary' %}";
    }

    function click_next_button() {
        ajax_post_form_submission("{% url 'o55_tenant_member_confirm_create' %}");
    }
</script>
<!----------------------------------------------------------------------------->
<!-- end CUSTOM JAVASCRIPT -->


<main id="main" role="main">

    <!-- BREADCRUMB -->
    <!------------------------------------------------------------------------->
    <nav aria-label="breadcrumb">
	  	<ol class="breadcrumb">
	    	<li class="breadcrumb-item"><a href="{% url 'o55_tenant_dashboard_master' %}">{% trans 'Dashboard' %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'o55_tenant_member_summary' %}">{% trans 'Members' %}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{% trans 'Add' %}</a></li>
	  	</ol>
	</nav>
    <!------------------------------------------------------------------------->
    <!-- end BREADCRUMB -->

    <!-- BACK BUTTON -->
    <!------------------------------------------------------------------------->
    <div class="row">
		<div class="col-sm-3 p-3 mb-2">
			<a class="btn btn-primary btn-lg" href="{% url 'o55_tenant_member_summary' %}" role="button">
                <svg class="svg-inline--fa fa-arrow-left fa-w-14" aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="arrow-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                <path fill="currentColor" d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path>
            </svg><!-- <i class="fas fa-arrow-left"></i> -->&nbsp;{% trans 'Back to Members Home' %}</a>
		</div>
	</div>
    <!------------------------------------------------------------------------->
    <!-- end BACK BUTTON -->

    <h1>{% trans 'Add Associate Member' %}</h1>

    <!-- FORM WITH JS -->
    <!------------------------------------------------------------------------->
    <script>
        /**
         *  When page loads, the following code will be run first.
         */
        $(document).ready(function () {
            // Initialize our datepicker jQuery code with our HTML view.
            $( "#dob" ).datepicker({
                dateFormat: 'yy-mm-dd'  // https://stackoverflow.com/a/7500097
            });

            // Populate our 'select2' chosen values.
            var tmp_person_tags = localStorage.getObj("tmp_associate_member_person_tag_ids");
            $('#person_tags').val(tmp_person_tags);

            var tmp_skill_sets = localStorage.getObj("tmp_associate_member_skill_set_ids");
            $('#skill_sets').val(tmp_skill_sets);

            // Initialize our 'select2' element.
            $('#person_tags').select2();
            $('#skill_sets').select2();

            // Populate previously set values.
            $('#firstname').val(localStorage.getItem("tmp_associate_member_given_name"));
            $('#middlename').val(localStorage.getItem("tmp_associate_member_middle_name"));
            $('#lastname').val(localStorage.getItem("tmp_associate_member_last_name"));
            $('#phonenumber').val(localStorage.getItem("tmp_associate_member_telephone"));
            $('#other_phonenumber').val(localStorage.getItem("tmp_associate_member_other_telephone"));
            $('#dob').val(localStorage.getItem("tmp_associate_member_date_of_birth"));
            $('#gender').val(localStorage.getItem("tmp_associate_member_gender"));
            $("input[name=ok_to_email][value=" + localStorage.getItem("tmp_associate_member_ok_to_email") + "]").prop('checked', true);
            $("input[name=ok_to_text][value=" + localStorage.getItem("tmp_associate_member_ok_to_text") + "]").prop('checked', true);
            $('#street_address').val(localStorage.getItem("tmp_associate_member_street_address"));
            $('#street_address_extra').val(localStorage.getItem("tmp_associate_member_street_address_extra"));
            $('#address_locality').val(localStorage.getItem("tmp_associate_member_address_locality"));
            $('#address_region').val(localStorage.getItem("tmp_associate_member_address_region"));
            $('#address_country').val(localStorage.getItem("tmp_associate_member_address_country"));
            $('#postal_code').val(localStorage.getItem("tmp_associate_member_postal_code"));
            $('#post_office_box_number').val(localStorage.getItem("tmp_associate_member_post_office_box_number"));
            $('#email').val(localStorage.getItem("tmp_associate_member_email"));
            $('#telephone').val(localStorage.getItem("tmp_associate_member_telephone"));
            $('#password').val(localStorage.getItem("tmp_associate_member_password"));
            $('#password_repeat').val(localStorage.getItem("tmp_associate_member_password_repeat"));
            $('#describe').append(localStorage.getItem("tmp_associate_member_description"));
        }); // end Ready

        /**
         *  Function will unlock the submit button.
         */
        function disable_btn() {
            $('#id_submit_btn').val("{% trans 'Please Wait...' %}");
            $('#id_submit_btn').prop("disabled", true);
        }

        /**
         *  Function will lock the submit button.
         */
        function enable_btn() {
            $('#id_submit_btn').prop("disabled", false);
            $('#id_submit_btn').val("{% trans 'Update' %}");
        }

        function get_selected_radio_value(radiofields_name) {
            var radios = document.getElementsByName(radiofields_name);
            for (var i = 0, length = radios.length; i < length; i++) {
                if (radios[i].checked) {
                    // only one radio can be logically checked, don't check the rest
                    return radios[i].value;
                }
            }
            return null;
        }

        function valid_textfield_value(textfield_id, is_required, min_length) {
            var textfield = document.getElementById(textfield_id);
            var textfield_error = document.getElementById(textfield_id+'-error');
            var value = textfield.value;

            // CASE 1: BLANK FIELD.
            if (is_required) {
                if (value == '' || value == null || value == undefined || value.length == 0) {
                    $('#'+textfield_id).addClass('border-primary').removeClass('border-success');
                    textfield_error.innerHTML = "Field should not be blank.";
                    return true; // This means that an error occured in validation.
                }
            }

            // CASE 2: MINIMUM LENGTH NOT MET.
            if (value.length > 0) {              // If user entered something...
                if (value.length < min_length) { // Validate that the minium was entered...
                    $('#'+textfield_id).addClass('border-primary').removeClass('border-success');
                    textfield_error.innerHTML = "Field requires a minimum of "+min_length+" characters.";
                    return true;
                }
            }

            // Update the GUI to indicate this field has been updated.
            $('#'+textfield_id).addClass('border-success').removeClass('border-primary');

            // Return "false" which means no errors occured.
            return false;
        }

        function valid_radiofields_seleciton(radiofields_name, is_required) {
            var value = get_selected_radio_value(radiofields_name);

            if (is_required) {
                if (value == null) {
                    //TODO: IMPLEMENT UPDATE GUI VALIDATION.
                    // alert("Please select a radio button for "+radiofields_name+".");
                    return false;
                }
            }

            // Return "false" which means no errors occured.
            return false;
        }

        function ajax_cancel(redirect_url) {
            window.location = redirect_url;
        }

        /**
         *  Function will confirm the email is unique with the API web-service
         *  and then submit our form for saving in the local storage after the
         *  fields get validated.
         */
        function ajax_post_form_submission(redirect_url) {
            var tmp_email = $('#email').val();
            post_is_email_unique_api(
                tmp_email,
                function(result) {
                    if (result === 1 || result === '1') {
                        save_submission(redirect_url);
                    } else {
                        alert("EMAIL ALREADY EXISTS, PLEASE PICK A NEW EMAIL ADDRESS"); //TODO: UPDATE THE GUI.
                        return;
                    }
                },
                function(json_error) {
                    alert(json_error);
                    //TODO: (1) OUTPUT THE ERROR IN A TEXT. (2) FOCUS ON THE OUTPUT.
                }
            ); // end API CALL
        }

        /**
         *  Function will validate the fields and then save them to the local
         *  storage, then direct user to the link in the 'redirect_url' variable.
         */
        function save_submission(redirect_url) {
            // GET OUR FORM.
            var form = document.getElementById('add-member-form');

            // VALIDATE ALL OUR FORM FIELDS.
            var has_error = false;
            has_error |= valid_textfield_value('email', true, 2);
            has_error |= valid_textfield_value('firstname', true, 2);
            has_error |= valid_textfield_value('lastname', true, 2);
            has_error |= valid_textfield_value('phonenumber', true, 10);
            has_error |= valid_textfield_value('other_phonenumber', false, 10);
            has_error |= valid_radiofields_seleciton('ok_to_email', true);
            has_error |= valid_radiofields_seleciton('ok_to_text', true);
            has_error |= valid_textfield_value('describe', false, 2);
            has_error |= valid_textfield_value('street_address', true, 3);
            has_error |= valid_textfield_value('street_address_extra', false, 3)
            has_error |= valid_textfield_value('address_locality', true, 3);
            has_error |= valid_textfield_value('address_region', true, 3);
            has_error |= valid_textfield_value('address_country', true, 3);
            has_error |= valid_textfield_value('postal_code', true, 3);
            has_error |= valid_textfield_value('post_office_box_number', false, 3);
            has_error |= valid_textfield_value('password', false, 2);
            has_error |= valid_textfield_value('password_repeat', false, 2);

            // INTERRUPT THE FORM SUBMISSION IF ANY ERRORS EXISTED AND UPDATE THE
            // GUI TO INDICATE THAT WE HAVE VALIDATED SOME FIELDS.
            form.classList.add('was-validated');
            if (has_error) {
                return; // STOP THIS FUNCTION FROM GOING FORWARD UNTIL ERRORS FIXED.
            }

            // EXTRACT OUR FIELD VALUES AND SAVE THEM IN LOCAL STORAGE.
            var given_name = $('#firstname').val();
            var middle_name = $('#middlename').val();
            var last_name = $('#lastname').val();
            var date_of_birth = $('#dob').val();
            if (date_of_birth !== undefined && date_of_birth != null && date_of_birth.length > 0) {
                var mydate = new Date(date_of_birth); // Convert "MM DD, YYYY" to JS DATE
                date_of_birth = mydate.toISOString().substring(0, 10); // Convert JS DATE to "YYYY-MM-DD"
            } else {
                date_of_birth = null;
            }
            var gender = $('#gender').val();
            if (gender == undefined || gender == null || gender.length == 0) {
                gender = null;
            }
            var ok_to_email = get_selected_radio_value('ok_to_email');
            var ok_to_text = get_selected_radio_value('ok_to_text');
            var street_address = $('#street_address').val();
            var street_address_extra = $('#street_address_extra').val();
            var address_region = $('#address_region').val();
            var address_locality = $('#address_locality').val();
            var address_country = $('#address_country').val();
            var postal_code = $('#postal_code').val();
            var post_office_box_number = $('#post_office_box_number').val();
            var email = $('#email').val();
            // var area_served = $('#id_area_served').val();
            var telephone = $('#phonenumber').val();
            // var telephone_extension = $('#id_telephone_extension').val();
            var other_telephone = $('#other_phonenumber').val();
            // var fax_number = $('#id_fax_number').val();
            var password = $('#password').val();
            var password_repeat = $('#password_repeat').val();
            var person_tags = $('#person_tags').val();
            var skill_sets = $('#skill_sets').val();
            var description = $('#describe').val();

            localStorage.setItem("tmp_associate_member_given_name", given_name);
            localStorage.setItem("tmp_associate_member_middle_name", middle_name);
            localStorage.setItem("tmp_associate_member_last_name", last_name);
            localStorage.setItem("tmp_associate_member_date_of_birth", date_of_birth);
            localStorage.setItem("tmp_associate_member_gender", gender);
            localStorage.setItem("tmp_associate_member_ok_to_email", ok_to_email);
            localStorage.setItem("tmp_associate_member_ok_to_text", ok_to_text);
            localStorage.setItem("tmp_associate_member_street_address", street_address);
            localStorage.setItem("tmp_associate_member_street_address_extra", street_address_extra);
            localStorage.setItem("tmp_associate_member_address_region", address_region);
            localStorage.setItem("tmp_associate_member_address_locality", address_locality);
            localStorage.setItem("tmp_associate_member_address_country", address_country);
            localStorage.setItem("tmp_associate_member_postal_code", postal_code);
            localStorage.setItem("tmp_associate_member_post_office_box_number", post_office_box_number);
            localStorage.setItem("tmp_associate_member_email", email);
            localStorage.setItem("tmp_associate_member_telephone", telephone);
            localStorage.setItem("tmp_associate_member_other_telephone", other_telephone);
            localStorage.setItem("tmp_associate_member_password", password);
            localStorage.setItem("tmp_associate_member_password_repeat", password_repeat);
            localStorage.setItem("tmp_associate_member_description", description);

            // SAVE ARRAY OF IDS.
            localStorage.setObj("tmp_associate_member_person_tag_ids", person_tags);
            localStorage.setObj("tmp_associate_member_skill_set_ids", skill_sets);

            // SAVE ARRAY OF VALUE ITEMS.
            var person_tags_arr = [];
            for (var i = 0; i < person_tags.length; i++) {
                var option_id = person_tags[i];
                var option_value = $('#person_tag_option_id_'+option_id).text();
                person_tags_arr.push(option_value);
            } // end FOR LOOP.
            localStorage.setObj("tmp_associate_member_person_tag_values", person_tags_arr);

            // SAVE ARRAY OF VALUE ITEMS. (2 of 2)
            var skill_sets_arr = [];
            for (var i = 0; i < skill_sets.length; i++) {
                var option_id = skill_sets[i];
                var option_value = $('#skill_set_option_id_'+option_id).text();
                skill_sets_arr.push(option_value);
            } // end FOR LOOP.
            localStorage.setObj("tmp_associate_member_skill_set_values", skill_sets_arr);

            // REDIRECT TO OUR CONFIRM PAGE.
            window.location = redirect_url;
        }

        function click_cancel_button() {
            window.location = "{% url 'o55_tenant_member_summary' %}";
        }

        function click_next_button() {
            ajax_post_form_submission("{% url 'o55_tenant_member_confirm_create' %}");
        }
    </script>
    <div class="col-sm-5 mx-auto mt-2">
        <!-- Associate form -->
        <div class="col-sm-12 fade show active" id="member-form" aria-labelledby="associate">
            <h3 class="pt-4 pb-2 text-center">Add Associate Member Form</h3>
            <p>Use this form to fill out the member information.</p>
            <p><span class="text-secondary font-italic"><sup>*</sup>&nbsp;-&nbsp;Indicates required field to fill out.</span></p>
            <!-- Error Output -->
            <div id="all_error_result" name="all_error_result"></div>
            <!-- end Error Output -->
            <p>&nbsp;</p>
            <form id="add-member-form" method="post" class="needs-validation" action="" novalidate>
            <!-- ############ PERSON ############ -->
            <p class="border-bottom mb-3 pb-1 text-secondary">Personal Information</p>
            <div class="form-row">
                <div class="form-group col-md-12 mb-4">
                    <label for="firstname">First name <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="firstname" name="firstname" placeholder="First name" minlength="2" maxlength="30" required autofocus>
                    <div id="firstname-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-7 mb-4">
                    <label for="middlename">Middle name <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="middlename" name="middlename" placeholder="Middle name" minlength="2" maxlength="30" required>
                    <div id="middlename-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="lastname">Last name <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="lastname" name="lastname" placeholder="Last name" minlength="2" maxlength="150" required>
                    <div id="lastname-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group p-0 col-md-7 mb-4">
                    <label for="dob">Date of Birth</label>
                    <div class="input-group input-group-lg">
                        <input type="text" class="form-control form-control-lg border border-success" id="dob" name="dob" placeholder="yyyy-mm-dd" required>
                        <div class="input-group-append">
                            <span class="input-group-text dob-icon bg-success border-success"><i class="far fa-calendar-alt"></i></span>
                        </div>
                        <div id="dob-error" class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="form-group col-md-7 mb-4 p-0">
                    <label for="gender">Gender</label>
                    <select class="custom-select form-control-lg border-success" id="gender" name="gender" required>
                        <option value="" selected>Gender...</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                    <div id="gender-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4 p-0">
      		      <label for="describe" class="font-b6">Describe the client:</label>
      		      <textarea class="form-control form-control-lg border border-success" id="describe" name="describe" placeholder="Describe here..." rows="4" minlength="10" required></textarea>
      		      <div id="describe-error" class="invalid-feedback"></div>
                  <small class="form-text text-muted">Maximum 1,000 characters.</small>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="tag">Tags</label>
                    <select id="person_tags" name="person_tags" class="form-control form-control-lg border border-success" name="states[]" multiple="multiple">
                    {% for tag in tags %}
                        <option value="{{ tag.id }}" id="person_tag_option_id_{{ tag.id }}">{{ tag }}</option>
                    {% endfor %}
                    </select>
                    <div id="person_tags-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="skill_sets">Skill sets</label>
                    <select id="skill_sets" name="skill_sets" class="form-control form-control-lg border border-success" name="states[]" multiple="multiple">
                    {% for skill_set in skill_sets %}
                        <option value="{{ skill_set.id }}" id="skill_set_option_id_{{ skill_set.id }}">{{ skill_set.sub_category }}</option>
                    {% endfor %}
                    </select>
                    <div id="skill_sets-error" class="invalid-feedback"></div>
                </div>
            </div>
            <!-- ############ end PERSON ############ -->
            <!-- ############ CONTACT POINT ############ -->
            <p class="border-bottom mb-3 pb-1 text-secondary">Contact Point</p>
            <div class="form-row">
                <div class="form-group col-md-7 mb-4">
                    <label for="phonenumber">Phone <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="phonenumber" name="phonenumber" placeholder="(xxx) xxx-xxxx" minlength="10" maxlength="31" required>
                    <div id="phonenumber-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-7 mb-4">
                    <label for="other_phonenumber">Mobile</label>
                    <input type="text" class="form-control form-control-lg border border-success" id="other_phonenumber" name="other_phonenumber" placeholder="(xxx) xxx-xxxx" minlength="10" maxlength="31">
                    <div id="other_phonenumber-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="email">E-Mail</label>
                    <input type="email" class="form-control form-control-lg border border-primary" id="email" name="email" placeholder="Email Address" maxlength="254">
                    <div id="email-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <p class="mb-1">Ok to E-Mail?</p>
                    <div class="form-radio custom-control custom-radio custom-control-inline">
                        <input type="radio" id="ok_to_email" name="ok_to_email" value="yes" class="custom-control-input form-check-input">
                        <label class="custom-control-label form-check-label" for="ok_to_email">Yes</label>
                    </div>
                    <div class="form-radio custom-control custom-radio custom-control-inline">
                        <input type="radio" id="ok_to_email2" name="ok_to_email" value="no" class="custom-control-input form-check-input">
                        <label class="custom-control-label form-check-label" for="ok_to_email2">No</label>
                    </div>
                </div>
                <div class="form-group mt-2 mb-4">
                    <p class="mb-1">Ok to Text?</p>
                    <div class="form-radio custom-control custom-radio custom-control-inline">
                        <input type="radio" id="ok_to_text" name="ok_to_text" value="yes" class="custom-control-input form-check-input">
                        <label class="custom-control-label form-check-label" for="ok_to_text">Yes</label>
                    </div>
                    <div class="form-radio custom-control custom-radio custom-control-inline">
                        <input type="radio" id="ok_to_text2" name="ok_to_text" value="no" class="custom-control-input form-check-input">
                        <label class="custom-control-label form-check-label" for="ok_to_text2">No</label>
                    </div>
                </div>
            </div>
            <!-- ############ end CONTACT POINT ############ -->
            <!-- ############ LOCATION ############ -->
            <p class="border-bottom mb-3 pb-1 text-secondary">Postal Address</p>
            <div class="form-row">
                <div class="form-group col-md-12 mb-4">
                    <label for="street_address">Street Address <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="street_address" name="street_address" placeholder="Street Address" minlength="3" maxlength="255" required>
                    <div id="street_address-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="street_address_extra">Street Address (Extra)</label>
                    <input type="text" class="form-control form-control-lg border border-success" id="street_address_extra" name="street_address_extra" placeholder="Street Address (Extra)" minlength="3" maxlength="255">
                    <div id="street_address_extra-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="address_locality">City <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="address_locality" name="address_locality" placeholder="City" minlength="3" maxlength="127" required>
                    <div id="address_locality-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-7 mb-4">
                    <label for="address_region">Province <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="address_region" name="address_region" placeholder="Province" minlength="3" maxlength="127" required>
                    <div id="address_region-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-7 mb-4">
                    <label for="address_country">Country <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="address_country" name="address_country" placeholder="Country" minlength="3" maxlength="127" required>
                    <div id="address_country-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-7 mb-4">
                    <label for="postal_code">Postal Code <sup>*</sup></label>
                    <input type="text" class="form-control form-control-lg border border-primary" id="postal_code" name="postal_code" placeholder="Postal Address" minlength="6" maxlength="6" required>
                    <div id="postal_code-error" class="invalid-feedback"></div>
                </div>
                <div class="form-group col-md-7 mb-4">
                    <label for="post_office_box_number">Post Office Box # </label>
                    <input type="text" class="form-control form-control-lg border border-success" id="post_office_box_number" name="post_office_box_number" placeholder="Post Office Box #" minlength="3" maxlength="255" required>
                    <div id="post_office_box_number-error" class="invalid-feedback"></div>
                </div>
            </div>
            <!-- ############ end LOCATION ############ -->
            <!-- ############ SECURITY ############ -->
            <p class="border-bottom mb-3 pb-1 text-secondary">Account Security</p>
            <div class="form-row">
                <div class="form-group col-md-12 mb-4">
                    <label for="password">Password</label>
                    <input id="password"
                         name="password"
                  placeholder="{% trans 'Password' %}"
                        class="form-control form-control-lg border border-success"
                         type="password"
               autocapitalize="off"
                    minlength="2"
                    maxlength="30" required />
                    <div id="password-error" class="invalid-feedback"></div>
                    <small id="passwordHelp" class="form-text text-muted ft-indent">
                        <svg class="svg-inline--fa fa-angle-right fa-w-8" aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg>
                        <!-- <i class="fas fa-angle-right"></i> -->  Please enter a single upper case character.
                    </small>
                    <small id="passwordHelp" class="form-text text-muted ft-indent">
                        <svg class="svg-inline--fa fa-angle-right fa-w-8" aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg>
                        <!-- <i class="fas fa-angle-right"></i> -->  Please enter a single special character like !, @, #, %, ^, etc.
                    </small>
                    <small id="passwordHelp" class="form-text text-muted ft-indent">
                        <svg class="svg-inline--fa fa-angle-right fa-w-8" aria-hidden="true" data-fa-processed="" data-prefix="fas" data-icon="angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg>
                        <!-- <i class="fas fa-angle-right"></i> -->  Password must contain atleast 5 characters.
                    </small>
                </div>
                <div class="form-group col-md-12 mb-4">
                    <label for="password_repeat">Repeat Password</label>
                    <input id="password_repeat"
                         name="password_repeat"
                  placeholder="{% trans 'Repeat Password' %}"
                        class="form-control form-control-lg border border-success"
                         type="password"
               autocapitalize="off"
                    minlength="2"
                    maxlength="30" required />
                    <div id="password_repeat-error" class="invalid-feedback"></div>
                </div>
            </div>
            <!-- ############ end SECURITY ############ -->
            <!-- end SUBMIT BUTTON -->
            <div class="form-group col-md-12 mb-3 p-0 mx-auto text-center">
                <button id="id_submit_btn"
                     class="btn btn-success btn-lg mt-4 float-right pl-4 pr-4"
                      type="button"
                   onclick="click_next_button();">
                    Next <i class="fas fa-arrow-right"></i></button>
                <button id="id_cancel_btn"
                     class="btn btn-orange btn-lg mt-4 float-left pl-4 pr-4"
                      type="button"
                   onclick="click_cancel_button();">
                    <i class="fas fa-times"></i>&nbsp;Back
                </button>
            </div>
            <!-- end SUBMIT BUTTON -->
        </div>
    </div>
    <!------------------------------------------------------------------------->
    <!-- end FORM WITH JS-->

    <!-- RETURN-TO-TOP -->
    <a id="return-to-top" href="#" class="btn-info btn-lg back-to-top" role="button" title="Back to top"><i class="fas fa-angle-up fa-2x"></i></a>
    <!-- end RETURN-TO-TOP -->
</main>

{% endblock content %}
